<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.xinzhili.chat.dao.custom.CustomGroupMemberDetailMapper">

  <update id="updateUnread">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 11 16:14:04 CST 2018.
    -->
    update s_message.t_group_member_detail
    set
    receiver_unread_count = receiver_unread_count+${count}
    where session_id = #{sessionId}
    and sender_id &lt;> #{senderId}
    and
    sender_role_type &lt;>
    #{senderRoleType,jdbcType=SMALLINT,typeHandler=cn.xinzhili.xutils.mybatis.typehandlers.EnumCodeHandler}
    and deleted_at is null
    <if test="receiverId !=null">
      and receiver_id=#{senderId}
    </if>
  </update>

  <update id="cleanUnread">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri May 11 16:14:04 CST 2018.
    -->
    update s_message.t_group_member_detail
    set
    receiver_unread_count = 0
    where session_id = #{sessionId}
    and sender_id = #{senderId}
    and
    sender_role_type =
    #{roleType,jdbcType=SMALLINT,typeHandler=cn.xinzhili.xutils.mybatis.typehandlers.EnumCodeHandler}

    and deleted_at is null
    <if test="receiverId !=null">
      and receiver_id=#{receiverId}
    </if>
  </update>


</mapper>